jQuery(function(e){"use strict";e.fn.qfImagePicker=function(){var i={};e(document).on("click",".quickfield-image_picker .add_images",function(t){t.preventDefault();var n=e(this),a=n.closest(".quickfield-image_picker"),l=a.find('input[type="hidden"]');return i[a.attr("id")]?void i[a.attr("id")].open():(i[a.attr("id")]=wp.media.frames.file_frame=wp.media({title:"Add Images",button:{text:"Add Images"},library:{type:"image"},multiple:a.data("multiple")}),i[a.attr("id")].on("open",function(){var t,n;t=l.val(),""!=t&&(n=i[a.attr("id")].state().get("selection"),t=t.split(","),e(t).each(function(e,i){var t;t=wp.media.attachment(i),t.fetch(),n.add(t?[t]:[])}))}),i[a.attr("id")].on("select",function(){var t,n;t=[],n=i[a.attr("id")].state().get("selection");var o=l.val();""!=o&&(o=o.split(","));var r="";n.map(function(i){i=i.toJSON();var n="string"==typeof i.sizes.thumbnail.url?i.sizes.thumbnail.url:i.url;(""==o||-1===e.inArray(i.id.toString(),o))&&(r+='<li class="added" data-id="'+i.id+'">\n                                    <div class="inner">\n                                        <img alt="'+i.title+'" src="'+n+'"/>\n                                    </div>\n                                    <a href="#" class="remove"></a>\n                                </li>',t.push(i.id))}),t.length>0&&(a.data("multiple")?(""!=o&&(t=o.concat(t)),a.find(".image_list").append(r)):a.find(".image_list").html(r),l.val(t))}),void i[a.attr("id")].open())}),e(document).on("click",".quickfield-image_picker .remove",function(i){i.preventDefault();var t=e(this),n=t.closest(".quickfield-image_picker").find("input.image_picker"),a=n.val(),l=t.closest("li").index();""!=a&&(a=a.split(","),delete a[l],a=a.filter(function(e){return e})),n.val(a),t.closest("li").remove()}),e.fn.sortable&&e(".quickfield-image_picker .image_list").sortable({stop:function(i,t){var n=[],a=e(t.item[0]).parent();a.find("li").each(function(){n.push(e(this).attr("data-id"))}),a.closest(".quickfield-image_picker").find("input.image_picker").val(n)}})},e.fn.qfImageBackground=function(){var i={};e(document).on("click",".quickfield-image_background .add_image",function(t){t.preventDefault();var n=e(this),a=n.closest(".quickfield-image_background"),l=a.find("input.image_background");return i[a.attr("id")]?void i[a.attr("id")].open():(i[a.attr("id")]=wp.media.frames.file_frame=wp.media({title:"Set Background Image",button:{text:"Set Background Image"},library:{type:"image"},multiple:!1}),i[a.attr("id")].on("open",function(){var t,n;t=l.val(),""!=t&&(n=i[a.attr("id")].state().get("selection"),t=t.split(","),e(t).each(function(e,i){var t;t=wp.media.attachment(i),t.fetch(),n.add(t?[t]:[])}))}),i[a.attr("id")].on("select",function(){var e,t;e=[],t=i[a.attr("id")].state().get("selection"),t.map(function(e){e=e.toJSON(),a.find(".attachment-media-view").addClass("added").css("background-image","url("+e.url+")"),l.val(e.id)})}),void i[a.attr("id")].open())}),e(document).on("click",".quickfield-image_background .remove",function(i){i.preventDefault();var t=e(this),n=t.closest(".quickfield-image_background").find("input.image_background");n.val(""),t.parent().removeClass("added")})},e.fn.qfLink=function(){e(document).on("click",".quickfield-link .link_button",function(i){i.preventDefault();var t,n,a,l,o,r,c,d,s;t=e(this).closest(".quickfield-link"),n=t.find("input.link"),a=t.find(".url-label"),l=t.find(".title-label"),o=n.data("json"),r=e("#wp-link-submit"),c=e('<input type="button" name="qf_link-submit" id="qf_link-submit" class="button-primary" value="Set Link">'),r.hide(),e("#qf_link-submit").remove(),c.insertBefore(r),d=e('<div class="link-target qf-link-nofollow"><label><span></span> <input type="checkbox" id="qf-link-nofollow"> Add nofollow option to link</label></div>'),e("#link-options .qf-link-nofollow").remove(),d.insertAfter(e("#link-options .link-target")),setTimeout(function(){var i=e("#most-recent-results").css("top");e("#most-recent-results").css("top",parseInt(i)+d.height())},200),s=window.wpLink,s.open("content"),_.isString(o.url)&&(e("#wp-link-url").length?e("#wp-link-url").val(o.url):e("#url-field").val(o.url)),_.isString(o.title)&&(e("#wp-link-text").length?e("#wp-link-text").val(o.title):e("#link-title-field").val(o.title)),e("#wp-link-target").length?e("#wp-link-target").prop("checked",!_.isEmpty(o.target)):e("#link-target-checkbox").prop("checked",!_.isEmpty(o.target)),e("#qf-link-nofollow").length&&e("#qf-link-nofollow").prop("checked",!_.isEmpty(o.rel)),c.unbind("click.qfLink").bind("click.qfLink",function(i){i.preventDefault(),i.stopImmediatePropagation();var t,o={};o.url=e("#wp-link-url").length?e("#wp-link-url").val():e("#url-field").val(),o.title=e("#wp-link-text").length?e("#wp-link-text").val():e("#link-title-field").val();var d=e(e("#wp-link-target").length?"#wp-link-target":"#link-target-checkbox");return o.target=d[0].checked?" _blank":"",o.rel=e("#qf-link-nofollow")[0].checked?"nofollow":"",t=_.map(o,function(e,i){return _.isString(e)&&0<e.length?i+":"+encodeURIComponent(e):void 0}).join("|"),n.val(t),n.data("json",o),a.html(o.url+o.target),l.html(o.title),s.close("noReset"),window.wpLink.textarea="",r.show(),c.unbind("click.qfLink"),c.remove(),e("#wp-link-cancel").unbind("click.qfLink"),d.attr("checked",!1),e("#most-recent-results").css("top",""),e("#qf-link-nofollow").attr("checked",!1),!1}),e("#wp-link-cancel").unbind("click.qfLink").bind("click.qfLink",function(i){return i.preventDefault(),s.close("noReset"),c.unbind("click.qfLink"),c.remove(),e("#wp-link-cancel").unbind("click.qfLink"),e("#wp-link-close").unbind("click.qfCloseLink"),window.wpLink.textarea="",!1}),e("#wp-link-close").unbind("click").bind("click.qfCloseLink",function(i){return i.preventDefault(),s.close("noReset"),c.unbind("click.qfLink"),c.remove(),e("#wp-link-cancel").unbind("click.qfLink"),e("#wp-link-close").unbind("click.qfCloseLink"),window.wpLink.textarea="",!1})})},e.fn.qfMap=function(){return this.each(function(i,t){if(!t.id.includes("__i__")){var n=e(this),a={};a.zoom=14,a.map=new google.maps.Map(n.find(".map_canvas")[0],{zoom:4,center:new google.maps.LatLng(40.590377,-97.726872)}),a.marker=null,a.overideMap=function(e){null!=a.marker&&(a.marker.setMap(null),a.marker=null),a.marker=new google.maps.Marker({position:e,draggable:!0,animation:google.maps.Animation.DROP,icon:a.iconMarker}),a.map.setCenter(e),a.map.setZoom(a.zoom),a.marker.setMap(a.map),google.maps.event.addListener(a.marker,"dragend",a.onDragMarker),google.maps.event.addListener(a.map,"zoom_changed",a.onZoomChanged)},a.onDragMarker=function(e){var i=e.latLng,t=i.lat()+","+i.lng()+"|"+a.zoom;n.find("input.map").val(t)},a.onZoomChanged=function(){a.zoom=a.map.getZoom();var i=n.find("input.map").val();if(""!=e.trim(i)){i=i.split("|");var t=i[0]+"|"+a.zoom;n.find("input.map").val(t)}},a.onLoad=function(){var i=n.find("input.map").val();if(""!=e.trim(i)){i=i.split("|");var t=i[0].split(",");t=new google.maps.LatLng(e.trim(t[0]),e.trim(t[1])),a.zoom=""!=e.trim(i[1])?parseInt(i[1]):14,a.overideMap(t)}},n.find(".js-map_search").geocomplete().bind("geocode:result",function(e,i){var t=i.geometry.location,l=t.lat()+","+t.lng()+"|"+a.zoom;n.find("input.map").val(l),a.overideMap(t)}),setTimeout(a.onLoad,500)}})}}),jQuery(function(e){document.getElementsByClassName("quickfield-color").length&&e(".quickfield-color").wpColorPicker(),document.getElementsByClassName("quickfield-image_picker").length&&e(".quickfield-image_picker").qfImagePicker(),document.getElementsByClassName("quickfield-image_background").length&&e(".quickfield-image_background").qfImageBackground(),document.getElementsByClassName("quickfield-icon_picker").length&&e(".quickfield-icon_picker select").fontIconPicker(),document.getElementsByClassName("quickfield-link").length&&e(".quickfield-link").qfLink(),"string"==typeof pagenow&&"widgets"!=pagenow&&document.getElementsByClassName("quickfield-map").length&&e(".quickfield-map").qfMap(),e(document).on("widget-updated",function(e,i){var t=i.find(".quickfield-map");t.length&&t.qfMap().addClass("map_loaded");var n=i.find(".quickfield-color");n.length&&n.wpColorPicker()}),e(document).on("click",".widget-title",function(i){var t=e(this).closest(".open"),n=t.find(".quickfield-map");n.length&&!n.hasClass("map_loaded")&&n.qfMap().addClass("map_loaded"),i.preventDefault()})});
